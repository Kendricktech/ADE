{% load static %}

<nav class="bg-gray-800 text-white  px-8 flex items-center justify-between">
    <!-- Logo Section -->
    <div class="flex items-center">
        <a href="{% url 'index' %}" class="text-2xl font-bold flex items-center">
            <img src="{% static 'images/logo.svg' %}" alt="Logo" class="h-8 w-auto">
        </a>
    </div>

    <!-- Mobile Hamburger Icon -->
    <button id="menu-toggle" class="text-white md:hidden focus:outline-none">
        <i class="fas fa-bars fa-lg"></i>
    </button>

    <!-- Desktop Navigation Links and Auth Buttons -->
    <div class="hidden md:flex space-x-6 items-center w-full justify-between">
        <ul class="flex space-x-6 text-lg">
            <li><a href="{% url 'index' %}" class="hover:text-gray-300">Home</a></li>
            <li><a href="#about" class="hover:text-gray-300">About</a></li>
            <li><a href="{% url "services" %}" class="hover:text-gray-300">Services</a></li>
            <li><a href="{% url "agents" %}" class="hover:text-gray-300">Contact</a></li>
        </ul>

        <div class="flex items-center space-x-4">
            {% if user.is_authenticated %}
                <a href="{% url 'conversation:inbox' %}" class="relative text-lg font-medium hover:text-gray-300">
                    <i class="fas fa-inbox"></i> Inbox
                    <span class="absolute top-0 right-0 w-4 h-4 text-xs text-center text-white bg-red-500 rounded-full">
                        {% if user.new_messages_count > 0 %}{{ user.new_messages_count }}{% else %}0{% endif %}
                    </span>
                </a>
                <a href="{% url 'index' %}" class="text-lg font-medium hover:text-gray-300">
                    <i class="fas fa-tachometer-alt"></i> Dashboard
                </a>
                <a href="{% url 'accounts:profile' %}" class="text-lg font-medium hover:text-gray-300">
                    <i class="fas fa-user"></i> Profile
                </a>
                <a href="{% url 'accounts:logout' %}" class="text-lg font-medium hover:text-gray-300">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
                {% if not user.is_agent %}
                    <a href="{% url 'accounts:logout' %}" class="px-4 py-2 text-lg font-medium text-white bg-green-500 rounded-lg hover:bg-green-600 flex items-center">
                        <i class="fas fa-plus-circle mr-2"></i> Be an Agent
                    </a>
                {% else %}
                    <a href="{% url 'listings:create_property' %}" class="px-4 py-2 text-lg font-medium text-white bg-green-500 rounded-lg hover:bg-green-600 flex items-center">
                        <i class="fas fa-plus-circle mr-2"></i> List a Property
                    </a>
                {% endif %}
            {% else %}
                <a href="{% url 'accounts:login' %}" class="text-lg font-medium hover:text-gray-300">Sign In</a>
                <a href="{% url 'accounts:register' %}" class="px-4 py-2 text-lg font-medium text-white bg-blue-500 rounded-lg hover:bg-blue-600">Register</a>
            {% endif %}
        </div>
    </div>
</nav>

<!-- Mobile Dropdown Menu -->
<div id="mobile-menu" class="hidden md:hidden bg-gray-800 text-white px-8 py-4">
    <ul class="flex flex-col space-y-4">
        <li><a href="{% url 'index' %}" class="hover:text-gray-300">Home</a></li>
        <li><a href="#about" class="hover:text-gray-300">About</a></li>
        <li><a href="{% url "services" %}" class="hover:text-gray-300">Services</a></li>
        <li><a href="{% url "agents" %}" class="hover:text-gray-300">Contact</a></li>
    </ul>

    {% if user.is_authenticated %}
        <div class="flex flex-col space-y-4 mt-4">
            <a href="{% url 'conversation:inbox' %}" class="relative text-lg font-medium hover:text-gray-300">
                <i class="fas fa-inbox"></i> Inbox
                <span class="absolute top-0 right-0 w-4 h-4 text-xs text-center text-white bg-red-500 rounded-full">
                    {% if user.new_messages_count > 0 %}{{ user.new_messages_count }}{% else %}0{% endif %}
                </span>
            </a>
            <a href="{% url 'index' %}" class="text-lg font-medium hover:text-gray-300">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </a>
            <a href="{% url 'index' %}" class="text-lg font-medium hover:text-gray-300">
                <i class="fas fa-user"></i> Profile
            </a>
            <a href="{% url 'accounts:logout' %}" class="text-lg font-medium hover:text-gray-300">
                <i class="fas fa-sign-out-alt"></i> Logout
            </a>
            {% if not user.is_agent %}
                <a href="{% url 'accounts:update' %}" class="px-4 py-2 text-lg font-medium text-white bg-green-500 rounded-lg hover:bg-green-600 flex items-center">
                    <i class="fas fa-plus-circle mr-2"></i> Be an Agent
                </a>
            {% else %}
                <a href="{% url 'listings:create_property' %}" class="px-4 py-2 text-lg font-medium text-white bg-green-500 rounded-lg hover:bg-green-600 flex items-center">
                    <i class="fas fa-plus-circle mr-2"></i> List a Property
                </a>
            {% endif %}
        </div>
    {% else %}
        <div class="flex flex-col space-y-4 mt-4">
            <a href="{% url 'accounts:login' %}" class="text-lg font-medium hover:text-gray-300">Sign In</a>
            <a href="{% url 'accounts:register' %}" class="px-4 py-2 text-lg font-medium text-white bg-blue-500 rounded-lg hover:bg-blue-600">Register</a>
        </div>
    {% endif %}
</div>

<!-- JavaScript to Toggle Mobile Menu -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const menuToggle = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');

        menuToggle.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
        });
    });
</script>
